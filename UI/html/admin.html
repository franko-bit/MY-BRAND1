<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Blog post</title>
	<link rel="stylesheet" type="text/css" href="../css/admin.css" />
		<link rel="stylesheet" type="text/css" href="../Admin/css/style.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link
  rel="stylesheet"
  href=" https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
/>
</head>
<body>	
	
	<div class="head">
		<label class="logo">
		  <img src="../img/1.png" />
		</label>
		<label class="menu"><i class="fa fa-bars"></i></label>
		<ul class="nav-links">
		  <li><a href="./Template.html">home</a></li>
		  <li><a href="./portif.html">Portofolio</a></li>
		  <li><a href="./About.html">About</a></li>
		  <li><a href="../html/create.html">Create</a></li>
		  <li><a href="./contact.html">contact</a></li>
		  <li><a href="../Admin/queries.html">view contact</a></li>
		  <li><a href="./port.html">Blog</a></li>
		  <li class="profile">
			<a href="../html/profile update.html"> <img src="../img/ac.png" class="2" /></a>
		  </li>
		  <li><a href="#" onclick="logout()">log out</a></li>
		</ul>
	  </div>
   
    <div class="cards" id="cards">
		<div class="lds-facebook"><div></div><div></div><div></div></div>
        
      
	</div>


	


</script>
        
   <!-- The core Firebase JS SDK is always required and must be listed first -->
   <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-firestore.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-auth.js"></script>
   <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
   <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-analytics.js"></script>

   <script>
     // Your web app's Firebase configuration
     var firebaseConfig = {
       apiKey: "AIzaSyAmqrO-89UKmGp01kKIrQZSsP-qFN7eY3Q",
       authDomain: "contact-9929f.firebaseapp.com",
       databaseURL: "https://contact-9929f.firebaseio.com",
       projectId: "contact-9929f",
       storageBucket: "contact-9929f.appspot.com",
       messagingSenderId: "685843499166",
       appId: "1:685843499166:web:4475ff4a2be2714b29138f",
       measurementId: "G-T8E2YCTQ5D",
     };
     // Initialize Firebase
     firebase.initializeApp(firebaseConfig);
     firebase.analytics();
     function retrieve() {
       firebase
         .firestore()
         .collection("Blogs")
         .get()
         .then((docs) => {
           let HTML = " ";
           docs.forEach((doc) => {
             const data = doc.data();
             var display = document.getElementById("cards");
			 
             HTML += `<div class="card">
			 
          <nav class="card-profile">
            <img src="${data.autharPicture}" />
            <b>${data.autharName}</b>
		  </nav>
		  <label class="iconn" onclick="noresult()">
			<a href="update.html?id=${doc.id}"><i class="fa fa-pencil" aria-hidden="true" id="edit"></i></a>
			<i class="fa fa-window-close" id="close" onclick="deletePost('${doc.id}')"></i>
		</label>
		
          <div class="post" class="last-div">
            <img src=" ${data.picture} " />
            <h3>
				${data.title} 
			</h3>
			<div class="footer">
			 	<span
					id="likespan2"
					><i class="fa fa-heart" aria-hidden="true"  ></i>${data.likes}</span
				  > <span
					id="likespan2"
					><i class="fa fa-comment-o" aria-hidden="true"></i>${data.comments}</span
				  > <span
					id="likespan2"
					><i class="fa fa-eye" aria-hidden="true"></i>0</span
				  >
				  </div>

				</div>
	</div>`;    
             display.innerHTML = HTML;
           });
         });
		 
     }
	 retrieve();
	
	function deletePost(id) { const result = confirm("Are you sure to delete the post? ");
	 result && firebase.firestore().collection("Blogs").doc(id).delete().catch(console.log)}

   const { uid: userId, displayName } = JSON.parse(
        localStorage.getItem("user")
      ) || { uid: null, displayName: "" };
      if (userId) {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        }
      }
      function showPosition(position) {
        firebase
          .firestore()
          .collection("locat")
          .doc(userUid)
          .add({
            name: displayName,
            longitude: position.coords.longitude,
            latitude: position.coords.latitude,
            country: position.coords.country,
          })
          .catch(console.log);
      }
   </script>
   
<script src="../Admin/js/navbar.js"></script>
<script src="../Admin/js/Auth.js"></script>		
</body>
</html>
